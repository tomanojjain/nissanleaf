// modal.js
const getModal = (data) => `<div id="DIV_1">
    <div id="DIV_2">
        <button id="BUTTON_3">
            X
        </button>
    </div>
    <div id="DIV_4">
        <div id="DIV_8">
                        <section id="SECTION_9">
                            <div id="DIV_10">
                                <div id="DIV_11">
                                    <div id="DIV_12">
                                        <h2 id="H2_13">
                                            Personal Contract Purchase
                                        </h2>
                                    </div>
                                    <div id="DIV_14">
                                        <h4 id="H4_15">
                                            £2,500 DEPOSIT CONTRIBUTION
                                        </h4>
                                        <h3 id="H3_16">
                                            0.00% APR REPRESENTATIVE PCP*
                                        </h3>
                                        <div id="DIV_17">
                                            <h5 id="H5_18">
                                                NISSAN LEAF
                                            </h5>
                                            <h5 id="H5_19">
                                                LEAF 39kWh 150PS Tekna
                                            </h5>
                                        </div>
                                    </div>
                                    <div id="DIV_20">
                                        <section id="SECTION_21">
                                            <picture id="PICTURE_22">
                                                <source id="SOURCE_23" />
                                                <source id="SOURCE_24" />
                                                <source id="SOURCE_25" /><img alt="NISSAN LEAF" src="https://www-europe.nissan-cdn.net/content/dam/Nissan/gb/vehicles/packshots/2023/leaf/LEAF.jpg.ximg.s_12_m.smart.png" id="IMG_26" />
                                            </picture>
                                            <p id="P_27">
                                                Image shown for guidance purpose only.
                                            </p>
                                        </section>
                                    </div>
                                    <div id="DIV_28">
\t\t\t\t\t\t\t\t\t\t<pre id="PRE_29">- Zap Map Premium 3 Year Free Subscription
 - ProPILOT Assist with Traffic Jam Pilot &amp; Lane Keep Assist
 - Bose® Premium Audio System

The Nissan Intelligent Mobility features in the 100% Electric Nissan LEAF will change how you move forever, with technology that makes you feel connected, confident, and excited.

To find out more, and to get a personalised quote, please contact your local dealer.
\t\t\t\t\t\t\t\t\t\t</pre>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section id="SECTION_30">
                            <div id="DIV_31">
                                <div id="DIV_32">
                                    <div id="DIV_33">
                                        0.00% APR Representative Example for LEAF 39kWh 150PS Tekna
                                    </div>
                                </div>
                                <div id="DIV_34">
                                    <div id="DIV_35">
                                        <div id="DIV_36">
                                            <table id="TABLE_37">
                                                <tbody id="TBODY_38">
                                                <tr id="TR_39">
                                                    <td id="TD_40">
                                                        On The Road Price
                                                    </td>
                                                    <td id="TD_41">
                                                        £32,290
                                                    </td>
                                                </tr>
                                                <tr id="TR_42">
                                                    <td id="TD_43">
                                                        Term
                                                    </td>
                                                    <td id="TD_44">
                                                        49 Months
                                                    </td>
                                                </tr>
                                                <tr id="TR_45">
                                                    <td id="TD_46">
                                                        Customer Deposit
                                                    </td>
                                                    <td id="TD_47">
                                                        £5,000
                                                    </td>
                                                </tr>
                                                <tr id="TR_48">
                                                    <td id="TD_49">
                                                        Nissan Deposit Contribution
                                                    </td>
                                                    <td id="TD_50">
                                                        £2,500
                                                    </td>
                                                </tr>
                                                <tr id="TR_51">
                                                    <td id="TD_52">
                                                        Total Deposit (Customer Deposit + Nissan Deposit Contribution)
                                                    </td>
                                                    <td id="TD_53">
                                                        £7,500
                                                    </td>
                                                </tr>
                                                <tr id="TR_54">
                                                    <td id="TD_55">
                                                        48 Monthly Payments of
                                                    </td>
                                                    <td id="TD_56">
                                                        £302
                                                    </td>
                                                </tr>
                                                <tr id="TR_57">
                                                    <td id="TD_58">
                                                        Representative APR
                                                    </td>
                                                    <td id="TD_59">
                                                        0.00% APR Representative
                                                    </td>
                                                </tr>
                                                <tr id="TR_60">
                                                    <td id="TD_61">
                                                        Rate Of Interest
                                                    </td>
                                                    <td id="TD_62">
                                                        0.00%
                                                    </td>
                                                </tr>
                                                <tr id="TR_63">
                                                    <td id="TD_64">
                                                        Mileage PA
                                                    </td>
                                                    <td id="TD_65">
                                                        8,000
                                                    </td>
                                                </tr>
                                                <tr id="TR_66">
                                                    <td id="TD_67">
                                                        Optional Final Payment
                                                    </td>
                                                    <td id="TD_68">
                                                        £10,303
                                                    </td>
                                                </tr>
                                                <tr id="TR_69">
                                                    <td id="TD_70">
                                                        Total Amount Of Credit
                                                    </td>
                                                    <td id="TD_71">
                                                        £24,790
                                                    </td>
                                                </tr>
                                                <tr id="TR_72">
                                                    <td id="TD_73">
                                                        Total Amount Payable
                                                    </td>
                                                    <td id="TD_74">
                                                        £32,290
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section id="SECTION_75">
                            <div id="DIV_76">
                                <div id="DIV_77">
                                    <div id="DIV_78">
                                        <h2 id="H2_79">
                                            Next Steps
                                        </h2>
                                        <ul id="UL_80">
                                            <li id="LI_81">
                                                <a href="https://www.nissan.co.uk/vehicles/new-vehicles/cta=RCI-FC&amp;model=leaf&amp;vehicleCapCode=NILE00TEK5HE%20A%20%202&amp;price=32290" id="A_82">FINANCE CALCULATOR</a>
                                            </li>
                                            <li id="LI_83">
                                                <a href="https://callback.nissan.co.uk/request-a-quote?model=leaf" id="A_84">REQUEST A QUOTE</a>
                                            </li>
                                            <li id="LI_85">
                                                <a href="https://tools.nissan.co.uk/value-my-car" id="A_86">VALUE MY CAR</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section id="SECTION_87">
                            <div id="DIV_88">
                                <div id="DIV_89">
                                    <h4 id="H4_90">
                                        Terms &amp; Conditions
                                    </h4>
                                    <p id="P_91">
                                        Offer valid from 1st May 2024 until 1st July 2024 at participating dealers only and subject to vehicle availability. To be eligible, vehicles must be ordered by 1st July 2024 and registered by 30th September 2024. Finance provided by Nissan Financial Services, Rivers Office Park, Denham Way, Maple Cross, Rickmansworth, WD3 9YS. Subject to status. Guarantees and indemnities may be required. You must be at least 18 and a UK resident (excluding the Channel Islands). NISSAN DEPOSIT CONTRIBUTION OF £2,500 IS ONLY AVAILABLE WHEN TAKEN ON 0% APR REPRESENTATIVE PCP NISSAN FINANCIAL SERVICES PRODUCT AND IS AVAILABLE ON All GRADES . Offer based on 8,000 miles pa, excess mileage 8p per mile. Offers not available in conjunction with any schemes or other offers. Vehicle price includes first registration fee and 12 months’ road fund licence. Nissan reserves the right to amend or withdraw offers at any time without prior notice, including in the case of any events or circumstances beyond Nissan’s reasonable control. Terms and conditions apply. Please refer to your local authorised Nissan dealer for further information and exact specifications. Your Nissan dealer is a credit broker and not a lender and can introduce you to a limited number of lenders and their finance products. You must decide whether the finance product is right for you. Lenders will typically pay commission to your Nissan dealer, being either a fixed fee or a fixed percentage of the amount you borrow. Commission rates between lenders could vary, but the commission received by your Nissan dealer does not influence the interest rate you will pay.
                                    </p>
                                </div>
                            </div>
                        </section>
                    </div>
    </div>
</div>`;

class Modal {
    constructor() {
        this.modalContainer = document.getElementById('modal-container');
    }

    show(data) {
        const modal = document.createElement('div');
        modal.classList.add('modal');
        modal.innerHTML = getModal(data);

        this.modalContainer.appendChild(modal);

        // Trigger reflow to apply the initial styles before adding the show class
        // eslint-disable-next-line no-unused-expressions,no-void
        void modal.offsetWidth;
        modal.classList.add('show');

        // Use a small delay to ensure the modal is in the DOM before adding the show class
        setTimeout(() => {
            modal.classList.add('slideInFromRight');
        }, 100);

        const closeButton = modal.querySelector('#BUTTON_3');
        closeButton.addEventListener('click', () => this.hide(modal));
    }

    // eslint-disable-next-line class-methods-use-this
    hide(modal) {
        modal.classList.add('fade-out');

        modal.addEventListener('animationend', () => {
            if (modal.parentNode) {
                modal.parentNode.removeChild(modal);
            }
        }, {once: true});
    }
}

export default Modal;
